<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bin Day Brewing — In Memory</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.ico">

  <!-- Firebase (compat version) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

  <style>
    :root {
      --bg-color: #f8f8f8;
      --text-color: #222;
      --accent-color: #000000; /* BLACK top bar */
      --light-color: #ffffff;
    }

    body {
      margin: 0;
      padding: 0;
      background: var(--bg-color);
      color: var(--text-color);
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      line-height: 1.6;
    }

    /* HEADER */
    .header {
      background: var(--accent-color);
      color: var(--light-color);
      text-align: center;
      padding: 60px 20px;
    }
    .header h1 {
      margin: 0;
      font-size: 2.4rem;
      letter-spacing: 1px;
      font-weight: 700;
    }
    .header p {
      margin: 10px 0 0;
      font-size: 1.1rem;
      opacity: 0.85;
    }

    /* MAIN CONTAINER */
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 30px 20px;
    }

    /* GALLERY */
    .gallery {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin: 40px 0;
    }

    .gallery img {
      width: 100%;
      height: 220px;
      object-fit: cover;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      background: #ddd;
    }

    /* SECTION HEADERS */
    .bio h2,
    .tribute h2,
    #game-section h2,
    #leaderboard-section h2,
    #comments-section h2 {
      margin-top: 40px;
      border-bottom: 2px solid #000;
      padding-bottom: 8px;
      color: #000;
      text-align: center;
    }

    /* FOOTER */
    .footer {
      text-align: center;
      padding: 20px;
      font-size: 0.9rem;
      color: #666;
      margin-top: 40px;
    }

    /* TOP LOGO */
    .top-logo {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 999;
    }
    .top-logo img {
      height: 60px;
      width: auto;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
    }

    /* MINIGAME AREA */
    #game-container {
      width: 400px;
      height: 600px;
      background: #eee;
      margin: 20px auto 40px;
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    #player {
      width: 60px;
      height: 60px;
      background: #222;
      border-radius: 50%;
      position: absolute;
      bottom: 10px;
      left: 170px;
    }

    .beer-can {
      width: 40px;
      height: 60px;
      background: gold;
      border: 3px solid #8a6b00;
      border-radius: 6px;
      position: absolute;
      top: -60px;
    }

    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      font-weight: bold;
      font-size: 1.1rem;
      color: #333;
    }

    /* COMMENTS BOX */
    #comments-list div {
      padding: 10px;
      border-bottom: 1px solid #ddd;
    }

  </style>
</head>
<body>

<!-- TOP LEFT LOGO -->
<div class="top-logo">
  <img src="bindaybrewing1.jpg" alt="Bin Day Brewing Logo">
</div>

<!-- HEADER -->
<header class="header">
  <h1>In Memory of BIN DAY BREWING</h1>
  <p>Founded by Robbie Knox — A passion project to be remembered</p>
</header>

<div class="container">

  <!-- GALLERY -->
  <section class="gallery">
    <img src="bindaybrewing.jpg" alt="Bin Day Brewing Logo">
    <img src="bindayglass.jpg" alt="Bin Day Brewing glass">
    <img src="rollwithit.jpg" alt="Roll With It beer">
    <img src="themockup.jpg" alt="Can mockup artwork">
  </section>

  <!-- ABOUT -->
  <section class="bio">
    <h2>About Bin Day Brewing</h2>
    <p>
      Bin Day Brewing began as a humble lockdown-era project between Robbie Knox and a friend —
      starting from beer kits brewed at home and eventually growing into an official business.
    </p>
    <p>
      Their vision was simple: craft beers made with passion, humour, and heart.
      Though the brewery has since closed, what it represented deserves a legacy.
    </p>
  </section>

  <!-- TRIBUTE -->
  <section class="tribute">
    <h2>Remembering the Spirit</h2>
    <p>
      For many, Bin Day Brewing wasn’t just a beer brand — it was a spark during difficult times,
      an idea that made people smile, and a project that captured imagination.
    </p>
    <p>
      I was too young to try it myself, but I wish I could've.
    </p>
    <p><em>“Gone, but not forgotten.”</em></p>
  </section>

  <!-- MINIGAME -->
  <section id="game-section">
    <h2>Catch the Beer Cans</h2>
    <div id="game-container">
      <div id="player"></div>
      <div id="score">Score: 0</div>
    </div>
  </section>

  <!-- LEADERBOARD -->
  <section id="leaderboard-section">
    <h2>Global Leaderboard</h2>
    <div id="leaderboard-list" style="max-width:400px;margin:0 auto;text-align:center;">
      Loading leaderboard...
    </div>
  </section>

  <!-- COMMENTS -->
  <section id="comments-section">
    <h2>Community Comments</h2>

    <div style="max-width:600px;margin:20px auto;text-align:center;">
      <input id="comment-name" placeholder="Your name" 
             style="padding:10px;width:45%;margin:5px;">
      <input id="comment-text" placeholder="Your comment..." 
             style="padding:10px;width:45%;margin:5px;">
      <button onclick="submitComment()" 
              style="padding:10px 20px;margin-top:10px;">Post</button>
    </div>

    <div id="comments-list"
         style="max-width:600px;margin:20px auto;padding:10px;background:#fff;
                border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.1);">
      Loading comments...
    </div>
  </section>

</div>

<footer class="footer">
  This tribute page was created in appreciation of Bin Day Brewing and the impact it had.
</footer>

<!-- ========================= -->
<!--  JAVASCRIPT + FIREBASE   -->
<!-- ========================= -->

<script>
/* Your Firebase config (from firebase thing.txt) */
const firebaseConfig = {
  apiKey: "AIzaSyAumyoE9xkHP6ybY0O_52-O8Ro7OBbHjtg",
  authDomain: "bin-day-brewing.firebaseapp.com",
  databaseURL: "https://bin-day-brewing-default-rtdb.firebaseio.com",
  projectId: "bin-day-brewing",
  storageBucket: "bin-day-brewing.firebasestorage.app",
  messagingSenderId: "540124499398",
  appId: "1:540124499398:web:9f053c28d0d4d7df9c36c7"
};

/* Initialise Firebase */
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ========================= */
/*       MINIGAME CODE       */
/* ========================= */
let player = null;
let playerX = 170;
let score = 0;

function startGame() {
  player = document.getElementById("player");
  document.addEventListener("keydown", movePlayer);
  spawnBeerCan();
}

function movePlayer(e) {
  const speed = 20;
  if (e.key === "ArrowLeft" || e.key === "a") playerX -= speed;
  if (e.key === "ArrowRight" || e.key === "d") playerX += speed;

  playerX = Math.max(0, Math.min(340, playerX));
  player.style.left = playerX + "px";
}

function spawnBeerCan() {
  const container = document.getElementById("game-container");
  const can = document.createElement("div");
  can.classList.add("beer-can");
  can.style.left = Math.floor(Math.random() * 350) + "px";
  container.appendChild(can);

  let canY = -60;
  const fallSpeed = 3;

  const fallInterval = setInterval(() => {
    canY += fallSpeed;
    can.style.top = canY + "px";

    if (canY > 530) {
      const canX = parseInt(can.style.left);

      if (Math.abs(canX - playerX) < 50) {
        score++;
        document.getElementById("score").innerText = "Score: " + score;
        can.remove();
        clearInterval(fallInterval);
        spawnBeerCan();
      } else {
        clearInterval(fallInterval);
        can.style.background = "red";
        finishGame();
      }
    }
  }, 10);
}

function finishGame() {
  let name = prompt("Game Over! Score: " + score + "\nEnter your name:");
  if (!name) name = "Anonymous";

  saveScore(name, score);

  score = 0;
  document.getElementById("score").innerText = "Score: 0";

  document.querySelectorAll(".beer-can").forEach(e => e.remove());
  setTimeout(spawnBeerCan, 500);
}

/* SAVE SCORE TO FIREBASE */
function saveScore(name, score) {
  db.ref("leaderboard").push({
    name: name,
    score: score,
    timestamp: Date.now()
  });
}

/* LOAD LEADERBOARD */
function loadLeaderboard() {
  db.ref("leaderboard")
    .orderByChild("score")
    .limitToLast(10)
    .on("value", snap => {
      let rows = [];
      snap.forEach(child => rows.push(child.val()));
      rows.reverse();

      let html = "<h3>Top 10 Scores</h3>";
      rows.forEach(entry => {
        html += `<div style="padding:6px;">${entry.name}: <b>${entry.score}</b></div>`;
      });

      document.getElementById("leaderboard-list").innerHTML = html;
    });
}

/* COMMENTS */
function submitComment() {
  const name = document.getElementById("comment-name").value.trim();
  const text = document.getElementById("comment-text").value.trim();

  if (!name || !text) {
    alert("Please enter both name and comment!");
    return;
  }

  db.ref("comments").push({
    name: name,
    text: text,
    timestamp: Date.now()
  });

  document.getElementById("comment-text").value = "";
}

/* LOAD COMMENTS */
function loadComments() {
  db.ref("comments")
    .limitToLast(50)
    .on("value", snap => {
      let html = "";
      snap.forEach(child => {
        let c = child.val();
        html += `
          <div>
            <b>${c.name}</b><br>
            ${c.text}
          </div>
        `;
      });
      document.getElementById("comments-list").innerHTML = html;
    });
}

/* RUN EVERYTHING */
window.onload = function() {
  startGame();
  loadLeaderboard();
  loadComments();
};
</script>

</body>
</html>
